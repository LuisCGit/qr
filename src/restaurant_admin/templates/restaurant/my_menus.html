{% extends 'restaurant/base.html' %}
{% load i18n %}
{% load static %}
{% load crispy_forms_tags %}
{% block content %}
<html>

  <head>
    <style>
      #xOut {
        float: left;
        margin-top: 0px;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        <!-- <div class = 'card border-secondary bg-light mt-5 mb-5' id ='big_card_container'> -->

          <!-- <div class ='card-header'> -->

          <!-- the alert card if they havent picked to handle payments or not -->
          {% if me.answered_pay_question == False %}
            <div class = 'row justify-content-center mb-2'>
              <div class="card text-white bg-warning mb-3" style = 'width: 20rem;'>
                <div class = 'card-body'>
                  <div class = 'row justify-content-center'>
                    <div class = 'col'>
                      <h5>{% trans 'Would You Like Us to Handle the Payment Process for You?' %}</h5>
                    </div>
                  </div>
                  <div class = 'row justify-content-center mt-2'>
                    <div class = 'col'>
                      <form action = '/restaurant_admin/answer_question' method = 'post'>
                        {% csrf_token %}
                        <div class = 'row'>
                          <div class = 'col'>
                            <input type="radio" id="no" name="answer" value="no">
                            <label for="no">{% trans 'No' %}</label><br>
                          </div>
                          <div class = 'col ml-3'>
                            <input type="radio" id="yes" name="answer" value="yes">
                            <label for="yes">{% trans 'Yes' %}</label><br>
                          </div>
                        </div>

                        <div class = 'row justify-content-center'>
                          <div class = 'col'>
                            <button class = 'rounded' type = 'submit'>{% trans 'Submit' %}</button>
                          </div>
                        </div>

                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          {% endif %}

          <!-- the alert card if they havent put their logo and about info -->
          {% if me.info_input == False %}
            <div class = 'row justify-content-center mb-2'>
              <div class="card mb-3" style = 'width: 20rem;'>
                <div class = 'card-body'>
                  <div class = 'row justify-content-center'>
                    <div class = 'col'>
                      <h5>{% trans 'Tell Us About Your Restaurant' %}</h5>
                    </div>
                  </div>
                  <div class = 'row justify-content-center'>
                    <div class = 'col'>
                      <h7>{% trans 'this information will help your customers understand your vision' %}</h7>
                    </div>
                  </div>
                  <div class = 'row justify-content-center mt-3'>
                    <div class = 'col'>
                      <form action = '/restaurant_admin/answer_about' method = 'post' enctype = 'multipart/form-data'>
                        {% csrf_token %}
                        <div class = 'row justify-content-center'>
                          <b><label for="no">{% trans 'Your Menu Tagline' %}</label><br></b>
                          <input type = 'text' id = 'tagline' name = 'tagline' placeholder = "{% trans 'a short description ....' %}">
                        </div>

                        <div class = 'row justify-content-center mt-3'>
                          <b><label for="about">{% trans 'About Your Restaurant' %}</label><br></b>
                          <textarea rows = '4' cols = '23' id = 'about' name = 'about' placeholder = "{% trans 'We specialize in ....' %}"></textarea>
                        </div>

                        <div class = 'row justify-content-center mt-3'>
                          <b><label for = 'logo'>{% trans 'Restaurant Logo' %}</label><br></b>
                          <div class = 'col'>
                            <input type = 'file' id = 'logo' name = 'logo'>
                          </div>
                        </div>

                        <div class = 'row justify-content-center mt-3'>
                          <button class = 'rounded' type = 'submit'>{% trans 'Submit' %}</button>
                        </div>

                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          {% endif %}

            <div class = 'row justify-content-center mb-2'>
              <h2>
                <b>
                  {% trans "Your Menus" %}
                </b>
                <a onclick = 'menuForm()' style = 'cursor: pointer;'>
                  <svg class="bi bi-plus-circle-fill" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4a.5.5 0 0 0-1 0v3.5H4a.5.5 0 0 0 0 1h3.5V12a.5.5 0 0 0 1 0V8.5H12a.5.5 0 0 0 0-1H8.5V4z"/>
                  </svg>
                </a>
              </h2>
            </div>

            <div class = 'row justify-content-center'>
              <div class = 'card mt-5 mb-5' id = 'menu_form' style = 'display:none; width:20rem;' >

                <div class ='card-header'>
                  <!-- X out of the card button -->
                  <div class = 'row justify-content-begin'>
                    <a id = 'xOut' onclick = 'closeMenuForm()' style = 'cursor: pointer; color: red'>
                      <svg class="bi bi-x-square" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M14 1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
                        <path fill-rule="evenodd" d="M11.854 4.146a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708-.708l7-7a.5.5 0 0 1 .708 0z"/>
                        <path fill-rule="evenodd" d="M4.146 4.146a.5.5 0 0 0 0 .708l7 7a.5.5 0 0 0 .708-.708l-7-7a.5.5 0 0 0-.708 0z"/>
                      </svg>
                    </a>
                  </div>

                  <div class = 'row justify-content-center'>
                    <h3>{% trans 'Create New Menu' %}<h3>
                  </div>
                </div>

                <div class = 'card-body'>
                  <form method = 'post' action = '/restaurant_admin/add_menu' enctype="multipart/form-data">
                    {% csrf_token %}

                    <div class = 'row justify-content-center'>
                      <div class = 'col'>
                        {{form.name|as_crispy_field}}
                      </div>
                    </div>

                    <div class = 'row justify-content-center mt-5'>
                        <div class = 'col'>
                          <label for="photo">{% trans 'Photo' %}</label>
                          <input type="file" name = "photo" id="photo" required>
                        </div>
                    </div>

                    <!-- Buttons -->
                    <div class="row justify-content-center mt-5 mb-5">
                        <div class="btn-group">
                            <button type="submit" class="btn btn-primary">{% trans "Create" %}</button>
                        </div>
                    </div>

                  </form>
                </div>
              </div>
            </div>
          <!-- </div> -->

          <!-- <div class = 'card-body'> -->
            {% if menus|length == 0 %}
            <div class = 'row justify-content-center mt-5'>
              <h3>{% trans 'No Menus Yet' %}</h3>
            </div>
            {% else %}
            <div id = 'menu_container' class = 'row justify-content-center mt-5'>

                {% for menu in menus %}
                <div class = 'card mr-2 mt-2'>
                  <div class = 'card-body'>

                    <div class = 'row justify-content-center mb-2'>
                        <b style = 'color:black;'>{{ menu.name }}</b>
                    </div>

                    <div class = 'row justify-content-center'>
                        {% if menu.photo_path is not none %}
                          <img src = "{% static menu.photo_path %}" border=3 height=400 width=400>
                        {% else %}
                          <h5>{% trans 'No Photo' %}</h5>
                        {% endif %}
                    </div>

                    <div class = 'row justify-content-center mt-2'>
                      <div class = 'col-2'>
                        <a type = 'button' class = 'btn btn-secondary' href = '/restaurant_admin/view_menu/{{menu.id}}'>{% trans 'View' %}</a>
                      </div>

                      <div class = 'col-2'>
                        <a type = 'button' class = 'btn btn-secondary' href = '/restaurant_admin/edit_menu/{{menu.id}}'>{% trans 'Edit' %}</a>
                      </div>
                    </div>

                  </div>
                </div>
                {% endfor %}

            </div>
            {% endif %}
          <!-- </div> -->
        <!-- </div> -->

    </div>
  </body>
  <script>
    function menuForm(){
      if(document.getElementById('menu_form').style.display == 'block') document.getElementById('menu_form').style.display = 'none'
      else document.getElementById('menu_form').style.display = 'block'
    }
    function closeMenuForm(){
      document.getElementById('menu_form').style.display = 'none';
    }
  </script>
</html>
{% endblock %}
